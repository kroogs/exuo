(this.webpackJsonpexuo=this.webpackJsonpexuo||[]).push([[0],{147:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(16),o=n(0),r=n.n(o),c=n(58),i=n(305),l=n(301),d=n(303),u=n(25),s=n(42),m=n(20),f=n(19),p=function(e){var t=e.id,n=r.a.useState(null),o=Object(a.a)(n,2),p=o[0],g=o[1],b=r.a.useState(!1),v=Object(a.a)(b,2),h=v[0],E=v[1],y=Object(u.c)();return Object(f.j)((function(e){return r.a.createElement(s.a,null,r.a.createElement(c.a,{align:"center"},"Someone wants to share content with you.",r.a.createElement("br",null),"Do not accept if you do not trust them."),r.a.createElement(i.a,{mt:1,textAlign:"center"},p?r.a.createElement(c.a,{color:"error"},p):r.a.createElement(l.a,{disabled:h,onClick:function(){E(!0),e.seekPeerConnection(t).then((function(e){y(Object(m.b)("/node/".concat(e.id)))})).catch((function(e){g(e)}))},color:"primary"},h?r.a.createElement(d.a,{size:24}):"Accept")))}))}},148:function(e,t){},163:function(e,t,n){"use strict";var a=n(147);n.d(t,"PeerConnector",(function(){return a.a}));n(148)},187:function(e,t,n){e.exports=n(297)},19:function(e,t,n){"use strict";n.d(t,"j",(function(){return o})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return u})),n.d(t,"c",(function(){return ne})),n.d(t,"a",(function(){return te})),n.d(t,"b",(function(){return ve})),n.d(t,"d",(function(){return Ne})),n.d(t,"e",(function(){return Qe})),n.d(t,"f",(function(){return _e})),n.d(t,"g",(function(){return et}));var a=n(90),o=function(e){return Object(a.c)((function(t){return e(t.graph)}))},r=n(79),c=n(180),i=n(5),l=n(343),d=function(e){return i.h.model("EdgeMap",{edgeMap:i.h.map(i.h.array(i.h.safeReference(i.h.late(e),{acceptsUndefined:!1})))}).actions((function(e){return{hasEdge:function(t,n){var a,o;return n?Boolean(null===(a=e.edgeMap.get(t))||void 0===a?void 0:a.includes(n)):Boolean(null===(o=e.edgeMap.get(t))||void 0===o?void 0:o.length)}}})).actions((function(e){return{addEdge:function(t,n){var a;e.edgeMap.has(t)||e.edgeMap.set(t,[]),null===(a=e.edgeMap.get(t))||void 0===a||a.push(n)},removeEdge:function(t,n){var a;null===(a=e.edgeMap.get(t))||void 0===a||a.remove(n)}}})).views((function(e){return{getEdgeTag:function(t){return e.edgeMap.get(t)}}}))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.h.compose.apply(i.h,Object(c.a)([i.h.model({id:i.h.identifier})].concat(e))).named("Node")},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.h.model("Graph",Object.fromEntries(Object.keys(e).map((function(t){var n=e[t];if(Object(i.e)(n)&&Object(i.d)(n.properties.id))return[t,i.h.map(e[t])];throw Error("Model '".concat(t,"' requires 'id' identifier"))})))).actions((function(n){return{createNode:function(){var a,o,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Node",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e[c])throw Error("No model named '".concat(c,"'"));var d=e[c].create(Object(r.a)({id:null!==(a=null===(o=t.getId)||void 0===o?void 0:o.call(t))&&void 0!==a?a:Object(l.a)()},i));return n[c].put(d),d}}}))},m=u(d((function(){return m}))),f=(s({Node:m}),n(16)),p=n(32),g=n(78),b=i.h.model("Note",{label:i.h.string,summary:i.h.maybe(i.h.string),rawContentState:i.h.maybe(i.h.string)}).actions((function(e){return{setLabel:function(t){e.label=t},setSummary:function(t){e.summary=t},setRawContentState:function(t){e.rawContentState=JSON.stringify(t)}}})),v=n(0),h=n.n(v),E=n(325),y=n(301),N=n(326),j=n(346),O=n(327),k=n(305),w=n(157),C=n.n(w),S=n(156),x=n.n(S),M=n(158),B=n.n(M),T=n(159),A=n.n(T),R=n(160),L=n.n(R),I=n(161),F=n.n(I),D=n(151),P=n.n(D),W=n(155),z=n.n(W),K=n(33),U=(n(145),[{label:"UL",style:"unordered-list-item",icon:h.a.createElement(P.a,null)},{label:"OL",style:"ordered-list-item",icon:h.a.createElement(z.a,null)},{label:"Blockquote",style:"blockquote",icon:h.a.createElement(x.a,null)},{label:"Code Block",style:"code-block",icon:h.a.createElement(C.a,null)}]),G=[{label:"Bold",style:"BOLD",icon:h.a.createElement(B.a,null)},{label:"Italic",style:"ITALIC",icon:h.a.createElement(A.a,null)},{label:"Underline",style:"UNDERLINE",icon:h.a.createElement(L.a,null)},{label:"Monospace",style:"CODE",icon:h.a.createElement(F.a,null)}],q={CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}},J=function(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return""}},V=function(e){var t=e.onToggle,n=e.style,a=e.active,o=e.label,r=e.icon,c=function(e){e.preventDefault(),t(n)},i="RichEditor-styleButton";return a&&(i+=" RichEditor-activeButton"),r?h.a.createElement(E.a,{size:"small",onMouseDown:c,className:i},r):h.a.createElement(y.a,{size:"small",startIcon:r||void 0,onMouseDown:c,className:i},r?"":o)},X=function(e){var t=e.editorState,n=e.onToggle,a=t.getSelection(),o=t.getCurrentContent().getBlockForKey(a.getStartKey()).getType();return h.a.createElement("div",{className:"RichEditor-controls"},U.map((function(e){return h.a.createElement(V,{key:e.label,active:e.style===o,label:e.label,icon:e.icon,onToggle:n,style:e.style})})))},H=function(e){var t=e.editorState,n=e.onToggle,a=t.getCurrentInlineStyle();return h.a.createElement("div",{className:"RichEditor-controls"},G.map((function(e){return h.a.createElement(V,{key:e.label,active:a.has(e.style),label:e.label,icon:e.icon,onToggle:n,style:e.style})})))},$=Object(N.a)((function(e){return Object(j.a)({root:{width:"100%"},input:{padding:0},toolbar:{padding:0}})})),Q=(h.a.forwardRef((function(e,t){var n=e.note,a=e.text,o=e.placeholder,r=(e.autoFocus,e.onValue),c=e.className,i=$(),l=null===n||void 0===n?void 0:n.rawContentState,d=h.a.useMemo((function(){return l&&Object(K.convertFromRaw)(JSON.parse(l))}),[l]),u=h.a.useState((function(){var e;return K.EditorState.createWithContent(d||K.ContentState.createFromText(null!==(e=null!==a&&void 0!==a?a:null===n||void 0===n?void 0:n.label)&&void 0!==e?e:""))})),s=Object(f.a)(u,2),m=s[0],p=s[1],g=h.a.useState(!1),b=Object(f.a)(g,2),v=(b[0],b[1],function(e){var t=m.getCurrentContent(),a=Object(K.convertToRaw)(t);n&&(n.setRawContentState(a),n.setLabel(t.getFirstBlock().getText())),r&&r(n,e)});return h.a.createElement("div",{className:[i.root,c].join(" ")},h.a.createElement("div",{className:i.input},h.a.createElement(K.Editor,{ref:t,blockStyleFn:J,customStyleMap:q,editorState:m,handleKeyCommand:function(e,t){var n=K.RichUtils.handleKeyCommand(t,e);return n?(p(n),"handled"):"not-handled"},keyBindingFn:function(e){return 13===e.keyCode&&e.shiftKey?(v(),null):Object(K.getDefaultKeyBinding)(e)},onChange:p,onBlur:function(e){v()},placeholder:o,spellCheck:!0})),h.a.createElement(O.a,{variant:"dense",className:i.toolbar},h.a.createElement(k.a,{flexGrow:1},h.a.createElement(H,{editorState:m,onToggle:function(e){p(K.RichUtils.toggleInlineStyle(m,e))}})),h.a.createElement(X,{editorState:m,onToggle:function(e){p(K.RichUtils.toggleBlockType(m,e))}})))})),n(58),n(87),n(88),n(25)),Y=n(20),Z=n(42),_=(Object(N.a)((function(e){return Object(j.a)({root:{color:e.palette.text.secondary,backgroundColor:e.palette.background.default,padding:e.spacing(0,2,0,2)},backButton:{"&[disabled]":{visibility:"hidden",pointerEvents:"none"}},hide:{visibility:"hidden",mouseEvents:"none"},settingsButton:{},title:{flexGrow:1,textAlign:"center",overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:e.palette.text.primary}})})),u([d((function(){return i.h.union(i.h.late((function(){return _})),u(te),u(b))}))]).props({label:i.h.optional(i.h.string,"")}).actions((function(e){return{setLabel:function(t){e.label=t}}})).views((function(e){return{get childCount(){var t,n;return null!==(t=null===(n=e.edgeMap.get("child"))||void 0===n?void 0:n.length)&&void 0!==t?t:0}}}))),ee=i.h.union(i.h.null,i.h.boolean,i.h.string,i.h.number,i.h.array(i.h.late((function(){return ee}))),i.h.map(i.h.late((function(){return ee})))),te=i.h.model("Config",{name:i.h.maybe(i.h.string),items:i.h.map(ee)}).actions((function(e){return{set:function(t,n){e.items.set(t,n)}}})).views((function(e){return{get:function(t){return e.items.get(t)}}})),ne=s({Node:_,Config:u(te),Note:u(b)}).actions((function(e){return{setActiveMode:function(t){var n=e.activeModes;(null===n||void 0===n?void 0:n.includes(t))||n.push(t)},unsetActiveMode:function(t){var n=e.activeModes;(null===n||void 0===n?void 0:n.includes(t))&&n.remove(t)},toggleActiveMode:function(t){var n=e.activeModes;n&&(n.includes(t)?(n.remove(t),"select"===t&&e.clearSelectedNodes()):(n.push(t),"select"===t&&n.remove("edit"),"edit"===t&&(n.remove("select"),e.clearSelectedNodes())))}}})).actions((function(e){return{toggleSelectNode:function(t,n){var a=e.Config.get("system").get("selectedNodes");if(a){var o=a.get(n.id);o?o.includes(t.id)?(o.remove(t.id),0===o.length&&a.delete(n.id)):o.push(t.id):a.set(n.id,[t.id])}},clearSelectedNodes:function(){var t;null===(t=e.Config.get("system").get("selectedNodes"))||void 0===t||t.clear(),0===e.selectedNodes.size&&e.unsetActiveMode("select")},deleteSelectedNodes:function(){e.selectedNodes.forEach((function(t){return t.forEach((function(t){return e.Node.delete(t)}))})),e.clearSelectedNodes()},moveSelectedNodes:function(){var t,n=Object(p.a)(e.selectedNodes);try{for(n.s();!(t=n.n()).done;){var a,o=Object(f.a)(t.value,2),r=o[0],c=o[1],i=e.Node.get(r),l=Object(p.a)(c);try{for(l.s();!(a=l.n()).done;){var d=a.value,u=e.Node.get(d);u&&(u.removeEdge("parent",i),i.removeEdge("child",u),u.addEdge("parent",e.cursorNode),e.cursorNode.addEdge("child",u))}}catch(s){l.e(s)}finally{l.f()}}}catch(s){n.e(s)}finally{n.f()}e.clearSelectedNodes()},copySelectedNodes:function(){},linkSelectedNodes:function(){var t,n=Object(p.a)(e.selectedNodes.values());try{for(n.s();!(t=n.n()).done;){var a,o=t.value,r=Object(p.a)(o);try{for(r.s();!(a=r.n()).done;){var c=a.value,i=e.Node.get(c);i&&(i.addEdge("parent",e.cursorNode),e.cursorNode.addEdge("child",i))}}catch(l){r.e(l)}finally{r.f()}}}catch(l){n.e(l)}finally{n.f()}e.clearSelectedNodes()},unlinkSelectedNodes:function(){var t,n=Object(p.a)(e.selectedNodes);try{for(n.s();!(t=n.n()).done;){var a,o=Object(f.a)(t.value,2),r=o[0],c=o[1],i=e.Node.get(r),l=Object(p.a)(c);try{for(l.s();!(a=l.n()).done;){var d=a.value,u=e.Node.get(d);u&&(u.removeEdge("parent",i),i.removeEdge("child",u))}}catch(s){l.e(s)}finally{l.f()}}}catch(s){n.e(s)}finally{n.f()}e.clearSelectedNodes()},removeSelectedNodes:function(){var t,n=Object(p.a)(e.selectedNodes);try{for(n.s();!(t=n.n()).done;){var a,o=Object(f.a)(t.value,2),r=o[0],c=o[1],i=e.Node.get(r),l=Object(p.a)(c);try{for(l.s();!(a=l.n()).done;){var d=a.value,u=e.Node.get(d);u&&(u.removeEdge("parent",i),i.removeEdge("child",u),0===u.edgeMap.get("parent").size&&e.deleteNode(u))}}catch(s){l.e(s)}finally{l.f()}}}catch(s){n.e(s)}finally{n.f()}e.clearSelectedNodes()},setCursorNode:function(t){e.Config.get("system").set("cursorNodeId",t.id)}}})).actions((function(e){return{afterCreate:function(){Object(g.a)(e).then((function(){if(!e.rootNode){var t=e.createNode("Node",{label:"Exuo"});Object(i.a)(e.Config,{system:{id:"system",items:{rootNodeId:t.id,selectedNodes:{},activeModes:[]}}})}}))},createChild:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Node",o=e.createNode(a,n);return t.addEdge("child",o),o.addEdge("parent",t),o},deleteNode:function(t){e.Node.delete(t.id)}}})).views((function(e){return{get rootNode(){var t=e.Config.get("system");return e.Node.get(null===t||void 0===t?void 0:t.get("rootNodeId"))},get cursorNode(){var t=e.Config.get("system");return e.Node.get(t.get("cursorNodeId"))},get activeModes(){var t=e.Config.get("system");return null===t||void 0===t?void 0:t.get("activeModes")},get selectedNodes(){var t=e.Config.get("system");return null===t||void 0===t?void 0:t.get("selectedNodes")},get selectedNodeCount(){var t,n=0,a=Object(p.a)(e.selectedNodes);try{for(a.s();!(t=a.n()).done;){n+=t.value[1].length}}catch(o){a.e(o)}finally{a.f()}return n}}})),ae=n(329),oe=n(53),re=n(306),ce=n(332),ie=n(333),le=n(341),de=n(167),ue=n.n(de),se=n(166),me=n.n(se),fe=n(18),pe=Object(N.a)((function(e){return Object(j.a)({listItem:{cursor:"pointer",transition:e.transitions.create(["color"],{duration:e.transitions.duration.shortest}),"&:hover, &:focus":{color:e.palette.primary.main},"&.editMode":{cursor:"text",color:"unset"},"&.selectMode":{cursor:"default",color:"unset"},"&.Mui-selected":{background:"\n\n        linear-gradient(\n          to top,\n          ".concat(Object(fe.b)(e.palette.background.default,0),",\n          ").concat(Object(fe.b)(e.palette.background.default,.8)," 6% 94%,\n          ").concat(Object(fe.b)(e.palette.background.default,0),"\n        ),\n        linear-gradient(\n          to right,\n          ").concat(e.palette.primary.main,",\n          ").concat(e.palette.secondary.main," \n        )"),"&:hover":{color:"unset"},"& a:hover":{color:"unset"}}},childList:{marginLeft:e.spacing(3),padding:0},itemText:{margin:0,overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis","& .MuiListItemText-primary":{display:"inline"},"& .MuiListItemText-secondary":{display:"inline",paddingLeft:e.spacing(1)},"&.expand":{"& .MuiListItemText-secondary":{display:"block",paddingLeft:0}}},listItemSelectCheckbox:{padding:e.spacing(0,1,0,1),"&:hover, &.Mui-checked:hover":{backgroundColor:"unset"}},listItemIcon:{minWidth:"auto"},editItemText:Object(r.a)({display:"inline-block",margin:0,overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},e.typography.body1),secondaryActions:{right:0},childButton:{cursor:"pointer",color:e.palette.text.primary,transition:e.transitions.create(["color"],{duration:e.transitions.duration.shortest}),minWidth:"unset",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),"&:hover, &:focus":{color:e.palette.primary.main,background:"inherit"}}})})),ge=function(e){var t=e.node,n=e.parentNode,a=e.expandSecondaryTypography,r=(Object(oe.a)(e,["node","parentNode","expandSecondaryTypography"]),pe()),c=Object(Q.c)(),i=h.a.useState(!1),l=Object(f.a)(i,2),d=l[0],u=l[1],s=h.a.useState(!1),m=Object(f.a)(s,2),p=m[0],g=m[1],b=function(){return g((function(e){return!e}))};return o((function(e){var o,i=null===(o=e.selectedNodes.get(n.id))||void 0===o?void 0:o.includes(t.id),l=t.label.indexOf("\n");return h.a.createElement(h.a.Fragment,null,h.a.createElement(re.a,{component:"li",onClick:function(a){a.preventDefault(),a.altKey?b():e.activeModes.includes("select")?e.toggleSelectNode(t,n):e.activeModes.includes("edit")?u(!0):a.metaKey||a.ctrlKey?(e.toggleActiveMode("select"),e.toggleSelectNode(t,n)):c(Object(Y.b)("/node/".concat(t.id,"/")))},selected:i,className:[r.listItem,e.activeModes.includes("edit")?"editMode":"",e.activeModes.includes("select")?"selectMode":""].join(" ")},d?h.a.createElement(Ne,{label:t.label,onValue:function(e){u(!1),e&&t.setLabel(e)}}):h.a.createElement(ce.a,{primary:l>0?t.label.slice(0,l):t.label,secondary:l>0?t.label.slice(l+1):void 0,className:[r.itemText,a?"expand":""].join(" ")}),d||h.a.createElement(ie.a,{className:r.secondaryActions},(t.childCount>0||e.activeModes.includes("select"))&&h.a.createElement(y.a,{to:Object(Y.b)("/node/".concat(t.id,"/")),component:Q.a,onClick:function(t){if(t.altKey)return t.preventDefault(),void b();e.activeModes.includes("select")||(t.preventDefault(),b())},className:r.childButton,endIcon:t.childCount>0&&p?h.a.createElement(me.a,null):h.a.createElement(ue.a,null),size:"small"},t.childCount>0&&t.childCount))),t.childCount>0&&h.a.createElement(le.a,{in:p,timeout:"auto",unmountOnExit:!0},h.a.createElement(ve,{node:t,edgeTag:"child",className:r.childList})))}))};ge.defaultProps={expandSecondaryTypography:!0};var be=Object(N.a)((function(e){return Object(j.a)({list:{padding:0,"&>li":{borderTop:".01px solid ".concat(e.palette.divider)},"&.outer>li:first-child":{borderTop:"unset"}}})})),ve=function(e){var t=e.node,n=e.edgeTag,a=e.outer,r=e.className,c=be();return o((function(e){var o;return h.a.createElement(ae.a,{"aria-label":"edge list",className:[c.list,a?"outer":"",r].join(" ")},null===(o=t.edgeMap.get(n))||void 0===o?void 0:o.map((function(e){return h.a.createElement(ge,{node:e,parentNode:t,key:"".concat(t.id,"-").concat(n,"-").concat(e.id)})})))}))},he=n(334),Ee=n(342),ye=Object(N.a)((function(e){return Object(j.a)({root:{padding:0,"& input, & textarea":{padding:"3px 0 2px 0"}}})})),Ne=function(e){var t=e.label,n=e.placeholder,a=e.className,r=e.onValue,c=h.a.useRef(),i=ye(),l=h.a.useState(null!==t&&void 0!==t?t:""),d=Object(f.a)(l,2),u=d[0],s=d[1],m=h.a.useState(!1),p=Object(f.a)(m,2),g=p[0],b=p[1];return h.a.useEffect((function(){var e;g||(null===(e=c.current)||void 0===e||e.setSelectionRange(u.length,u.length),b(!0))}),[g,u.length]),o((function(e){var t=function(e){r&&s(r(u,e)||"")};return h.a.createElement(he.a,{onClickAway:function(e){e.preventDefault(),t()}},h.a.createElement(Ee.a,{fullWidth:!0,multiline:!0,inputRef:c,placeholder:n,value:u,onKeyDown:function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),t(e))},onChange:function(e){s(e.target.value)},inputProps:{"aria-label":"label"},className:[i.root,a].join(" ")}))}))};Ne.defaultProps={placeholder:"Label"};var je=n(336),Oe=n(177),ke=n.n(Oe),we=n(176),Ce=n.n(we),Se=n(175),xe=n.n(Se),Me=n(178),Be=n.n(Me),Te=n(345),Ae=n(302),Re=n(347),Le=n(335),Ie=n(170),Fe=n.n(Ie),De=n(171),Pe=n.n(De),We=n(174),ze=n.n(We),Ke=n(173),Ue=n.n(Ke),Ge=n(172),qe=n.n(Ge),Je=n(168),Ve=n.n(Je),Xe=Object(N.a)((function(e){return Object(j.a)({root:{display:"inherit",position:"relative"},buttonGroup:{"& .MuiButtonGroup-groupedTextHorizontal":{borderRight:"unset"},"& .MuiButtonGroup-grouped":{minWidth:"unset"}},selectCount:{color:e.palette.primary.main,fontSize:12,position:"absolute",width:"100%",bottom:-e.spacing(1)},selectButton:{},deleteButton:{color:e.palette.error.main},popper:{"& svg":{marginRight:e.spacing(1)}},paper:{border:".01px solid ".concat(e.palette.divider)},selectMenu:{outline:0}})})),He=function(e){var t=e.node,n=e.className,a=e.onClick,r=Object(oe.a)(e,["node","className","onClick"]),c=Xe(),i=h.a.useState(!1),l=Object(f.a)(i,2),d=l[0],u=l[1],s=h.a.useRef(null);return o((function(e){var o=e.selectedNodeCount;return h.a.createElement("div",{className:[c.root,n].join(" ")},o>0&&h.a.createElement("span",{className:c.selectCount},o),h.a.createElement(E.a,Object.assign({color:"primary",ref:s,onClick:e.selectedNodes.size?function(){return u((function(e){return!e}))}:a,className:c.selectButton},r),h.a.createElement(Ve.a,null)),h.a.createElement(Te.a,{open:d,anchorEl:s.current,role:void 0,disablePortal:!0,className:c.popper},(function(n){n.placement;return e.setCursorNode(t),h.a.createElement(he.a,{onClickAway:function(e){e.preventDefault(),u(!1)}},h.a.createElement(Ae.a,{elevation:0,className:c.paper},h.a.createElement(Re.a,{dense:!0,className:c.selectMenu},h.a.createElement(Le.a,{divider:!0,onClick:function(){e.removeSelectedNodes(),u(!1)},className:c.deleteButton},h.a.createElement(Fe.a,null),"Remove"),h.a.createElement(Le.a,{onClick:function(){e.linkSelectedNodes(),u(!1)}},h.a.createElement(Pe.a,null),"Link here"),h.a.createElement(Le.a,{disabled:!0,onClick:function(){u(!1)}},h.a.createElement(qe.a,null),"Copy here"),h.a.createElement(Le.a,{divider:!0,onClick:function(){e.moveSelectedNodes(),u(!1)}},h.a.createElement(Ue.a,null),"Move here"),h.a.createElement(Le.a,{onClick:function(){e.clearSelectedNodes(),u(!1)}},h.a.createElement(ze.a,null),"Clear selection"))))})))}))},$e=Object(N.a)((function(e){return Object(j.a)({root:{justifyContent:"center"},insertButton:{background:"radial-gradient(circle at bottom, ".concat(e.palette.secondary.main,", ").concat(e.palette.primary.main," 75%)"),margin:e.spacing(0,2,0,2),boxShadow:"unset","&:active":{boxShadow:"unset"}}})})),Qe=function(e){var t=e.node,n=e.className,a=$e();return o((function(e){var o,r=t.childCount>0,c=null!==(o=e.selectedNodes.size)&&void 0!==o?o:0;return h.a.createElement(O.a,{className:[a.root,n].join(" ")},h.a.createElement(E.a,{disabled:!0,color:e.activeModes.includes("edit")?"primary":void 0,onClick:function(){return e.toggleActiveMode("edit")}},h.a.createElement(xe.a,null)),h.a.createElement(E.a,{disabled:!r,color:e.activeModes.includes("edit")?"primary":void 0,onClick:function(){return e.toggleActiveMode("edit")}},h.a.createElement(Ce.a,null)),h.a.createElement(je.a,{color:"primary",onClick:function(){e.setActiveMode("insert"),e.setActiveMode("edit")},className:a.insertButton},h.a.createElement(ke.a,null)),h.a.createElement(He,{disabled:!(r||c>0),node:t,color:e.activeModes.includes("select")?"primary":void 0,onClick:function(){e.toggleActiveMode("select")}}),h.a.createElement(E.a,{disabled:!0,color:e.activeModes.includes("edit")?"primary":void 0,onClick:function(){return e.toggleActiveMode("edit")}},h.a.createElement(Be.a,null)),!1)}))},Ye=n(328),Ze=Object(N.a)((function(e){return Object(j.a)({root:{textAlign:"center"},appBar:{borderBottom:".01px solid ".concat(e.palette.divider),background:"\n        linear-gradient(\n          to top,\n          ".concat(Object(fe.b)(e.palette.background.default,.7),",\n          ").concat(Object(fe.b)(e.palette.background.default,1)," 72%\n        )"),backdropFilter:"blur(2px)"},titleBar:{background:"unset"},children:{opacity:1,transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.standard}),"&.fade":{opacity:.15}},labelEditor:{borderTop:".01px solid ".concat(e.palette.divider),borderBottom:".01px solid ".concat(e.palette.divider),padding:e.spacing(1,2,1,2),background:"".concat(Object(fe.b)(e.palette.background.default,.9)),backdropFilter:"blur(3px)"},footer:{position:"sticky",bottom:0,width:"100%"},actions:{padding:e.spacing(2,2,4,2),borderTop:".01px solid ".concat(e.palette.divider),background:"\n        linear-gradient(\n          to bottom,\n          ".concat(Object(fe.b)(e.palette.background.default,.7),",\n          ").concat(Object(fe.b)(e.palette.background.default,1)," 72%\n        )"),backdropFilter:"blur(2px)",opacity:1,transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.standard}),"&.fade":{opacity:.15}}})})),_e=function(e){var t=e.node,n=e.className,a=e.children,r=Ze(),c=Object(Q.c)();return o((function(e){return h.a.createElement(k.a,{className:[r.root,n].join(" ")},h.a.createElement(Ye.a,{elevation:0,position:"sticky",className:r.appBar},h.a.createElement(Z.c,{title:t.label,className:r.titleBar})),h.a.createElement(k.a,{className:[r.children,e.activeModes.includes("insert")?"fade":""].join(" ")},a),h.a.createElement(k.a,{className:r.footer},e.activeModes.includes("insert")&&h.a.createElement(Ne,{className:r.labelEditor,placeholder:"Label",onValue:function(n,a){if(n){var o=e.createChild(t,{label:n});return(null===a||void 0===a?void 0:a.ctrlKey)?void c(Object(Y.b)("/node/".concat(o.id,"/"))):""}e.toggleActiveMode("insert")}}),h.a.createElement(Qe,{node:t,className:[r.actions,e.activeModes.includes("insert")?"fade":""].join(" ")})))}))},et=function(e){var t=e.id;return o((function(e){var n=e.rootNode,a=e.Node.get(t);return a&&(n=a),n&&e.setCursorNode(n),n?h.a.createElement(_e,{node:n},h.a.createElement(ve,{node:n,edgeTag:"child",outer:!0})):null}))}},20:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return m}));var a=n(53),o=n(0),r=n.n(o),c=n(25),i=n(19),l=n(163),d=n(42);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"/exuo"+e}var s=function(e){var t=e.component,n=Object(a.a)(e,["component"]);return r.a.createElement(t,n)},m=function(){return Object(i.j)((function(e){return e.rootNode?r.a.createElement(c.b,{basepath:"/exuo"},r.a.createElement(s,{path:"/",component:i.g}),r.a.createElement(s,{path:":type/:id",component:i.g}),r.a.createElement(s,{path:"peer/:id",component:l.PeerConnector}),r.a.createElement(s,{path:"settings",component:d.b})):null}))}},297:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),c=n.n(r),i=(n(192),n(90)),l=n(338),d=n(18),u=n(339),s=n(337),m=n(340),f=function(e){var t=e.children,n=Object(s.a)("(prefers-color-scheme: dark)"),a=o.a.useMemo((function(){var e={type:n?"dark":"light",primary:{main:"#FF2EA2"},secondary:{main:"#FF8F00"},background:{default:n?"#000000":"#ffffff"},text:{primary:n?"#dddddd":"#212121",secondary:n?"#aaaaaa":"#454545"}};return Object(l.a)({typography:{fontSize:16,fontFamily:["-apple-system","system-ui","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(", ")},palette:e,shape:{borderRadius:6},props:{MuiButton:{disableElevation:!0},MuiButtonGroup:{disableElevation:!0}},overrides:{MuiButtonBase:{root:{cursor:"default"}},MuiCssBaseline:{"@global":{"*::selection":{backgroundColor:Object(d.b)(e.primary.main,.3)},html:{userSelect:"none",overscrollBehavior:"none","-webkit-touch-callout":"none",maxWidth:"600px",margin:"auto","&, & body":{height:"100%"}}}}}})}),[n]);return o.a.createElement(u.a,{theme:a},o.a.createElement(m.a,null),t)},p=n(20),g=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(i.a,null,o.a.createElement(f,null,o.a.createElement(p.a,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/exuo",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/exuo","/service-worker.js");g?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):b(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):b(t,e)}))}}()},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return N})),n.d(t,"b",(function(){return F})),n.d(t,"d",(function(){return D}));var a=n(0),o=n.n(a),r=n(305),c=n(328),i=n(326),l=n(346),d=Object(i.a)((function(e){return Object(l.a)({root:{},appBar:{},actions:{width:"100%",color:e.palette.text.secondary,backgroundColor:e.palette.background.default,padding:e.spacing(0,2,0,2)},children:{}})})),u=function(e){var t=e.title,n=e.actions,a=e.className,i=e.children,l=d();return o.a.createElement(r.a,{className:[l.root,a].join(" ")},o.a.createElement(c.a,{elevation:0,position:"sticky",className:l.appBar},o.a.createElement(N,{title:t}),n),o.a.createElement(r.a,{className:l.children},i))},s=n(327),m=n(325),f=n(58),p=n(87),g=n.n(p),b=n(88),v=n.n(b),h=n(25),E=n(20),y=Object(i.a)((function(e){return Object(l.a)({root:{color:e.palette.text.secondary,backgroundColor:e.palette.background.default,padding:e.spacing(0,2,0,2)},backButton:{cursor:"pointer","&[disabled]":{visibility:"hidden",pointerEvents:"none"}},hide:{visibility:"hidden",mouseEvents:"none"},settingsButton:{},title:{flexGrow:1,textAlign:"center",overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:e.palette.text.primary}})})),N=function(e){var t,n=e.title,a=e.showBackButton,r=e.showSettingsButton,c=e.className,i=(e.children,y()),l=null!==(t=null===n||void 0===n?void 0:n.indexOf("\n"))&&void 0!==t?t:-1;return o.a.createElement(s.a,{className:[i.root,c].join(" ")},o.a.createElement(m.a,{disabled:D(),edge:"start","aria-label":"back",onClick:function(){return window.history.back()},className:[i.backButton,a?"":i.hide].join(" ")},o.a.createElement(g.a,null)),n&&o.a.createElement(f.a,{variant:"h6",className:i.title},l>0?n.slice(0,n.indexOf("\n")):n),o.a.createElement(m.a,{disabled:!0,edge:"end",component:h.a,to:Object(E.b)("/settings"),"aria-label":"settings",className:[i.settingsButton,r?"":i.hide].join(" ")},o.a.createElement(v.a,{fontSize:"small"})))};N.defaultProps={title:"Exuo",showBackButton:!0,showSettingsButton:!1};var j=n(329),O=n(330),k=n(306),w=n(331),C=n(332),S=n(333),x=n(344),M=n(164),B=n.n(M),T=n(103),A=n.n(T),R=n(165),L=n.n(R),I=n(19),F=function(){return Object(I.j)((function(e){var t;return o.a.createElement(u,null,o.a.createElement(j.a,{subheader:o.a.createElement(O.a,null,"Global")},o.a.createElement(k.a,null,o.a.createElement(w.a,null,o.a.createElement(A.a,null)),o.a.createElement(C.a,{id:"switch-list-label-dividers",primary:"Dividers"}),o.a.createElement(S.a,null,o.a.createElement(x.a,{disabled:!0,edge:"end",inputProps:{"aria-labelledby":"switch-list-label-list-dividers"}})))),o.a.createElement(j.a,{subheader:o.a.createElement(O.a,null,"Lists")},o.a.createElement(k.a,null,o.a.createElement(w.a,null,o.a.createElement(B.a,null)),o.a.createElement(C.a,{id:"switch-list-label-checkboxes",primary:"Checkboxes"}),o.a.createElement(S.a,null,o.a.createElement(x.a,{checked:null!==(t=e.listCheckboxSetting)&&void 0!==t&&t,onChange:function(){return e.toggleListCheckboxSetting()},edge:"end",inputProps:{"aria-labelledby":"switch-list-label-list-checkboxes"}}))),o.a.createElement(k.a,null,o.a.createElement(w.a,null,o.a.createElement(A.a,null)),o.a.createElement(C.a,{id:"switch-list-label-dividers",primary:"Dividers"}),o.a.createElement(S.a,null,o.a.createElement(x.a,{disabled:!0,edge:"end",inputProps:{"aria-labelledby":"switch-list-label-list-dividers"}}))),o.a.createElement(k.a,null,o.a.createElement(w.a,null,o.a.createElement(L.a,null)),o.a.createElement(C.a,{id:"switch-list-label-bluetooth",primary:"Show Extra Edge Types"}),o.a.createElement(S.a,null,o.a.createElement(x.a,{disabled:!0,edge:"end",inputProps:{"aria-labelledby":"switch-list-label-bluetooth"}})))))}))},D=function(){return window.location.pathname===Object(E.b)("/")||window.location.pathname===Object(E.b)()}},78:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(102),o=n.n(a),r=n(80),c=n(16),i=n(149),l=n(5),d=n(150);function u(e){return s.apply(this,arguments)}function s(){return(s=Object(i.a)(o.a.mark((function e(t){var n,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new d.a("default"),a=Object.keys(Object(l.b)(t).properties),i=Object.fromEntries(a.map((function(e){return[e,"id"]}))),n.version(1).stores(i),e.abrupt("return",Promise.all(a.map((function(e){return n.table(e).toArray().then((function(t){return[e,Object.fromEntries(t.map((function(e){return[e.id,e]})))]}))}))).then((function(e){Object(l.a)(t,Object.fromEntries(e)),Object(l.g)(t,(function(e){var a=e.path.split("/").slice(1),o=Object(c.a)(a,3),i=o[0],d=o[1],u=o[2];if("add"===e.op)n.table(i).put(Object(l.c)(t[i].get(d)));else{if("replace"!==e.op&&"remove"!==e.op)throw Error("Unknown patch op '".concat(e.op,"'"));if(u){var s=t[i].get(d)[u];Object(l.f)(s)&&(s=Object(l.c)(s)),n.table(i).update(d,Object(r.a)({},u,s))}else n.table(i).delete(d)}}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},90:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return f}));var a=n(0),o=n.n(a),r=n(19),c=(n(329),n(306),n(332),n(326)),i=n(346),l=n(5),d=(Object(c.a)((function(e){return Object(i.a)({root:{},item:{},itemText:{}})})),l.h.model("Store",{graph:r.c,location:l.h.optional(l.h.string,"/")}).actions((function(e){return{setLocation:function(t){e.location=t}}})).create({graph:r.c.create()})),u=o.a.createContext(d),s=function(e){var t=e.children;return o.a.createElement(u.Provider,{value:d},t)},m=n(179);function f(e){var t=o.a.useContext(u);if(t)return Object(m.a)((function(){return e(t)}));throw Error("Cannot use store before setup")}n(78)}},[[187,1,2]]]);
//# sourceMappingURL=main.bb03756f.chunk.js.map