(this.webpackJsonpexuo=this.webpackJsonpexuo||[]).push([[0],{62:function(e,t,n){e.exports=n(81)},81:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),i=n.n(r),c=(n(67),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function l(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=n(47),d=n(3),s=d.h.union(d.h.boolean,d.h.string,d.h.number,d.h.late((function(){return d.h.array(s)}))),p=d.h.model("Config",{name:d.h.maybe(d.h.string),items:d.h.map(s)}).actions((function(e){return{set:function(t,n){e.items.set(t,n)}}})).views((function(e){return{get:function(t){return e.items.get(t)}}})),f=d.h.union(d.h.boolean,d.h.string,d.h.number,d.h.late((function(){return d.h.array(f)}))),m=d.h.model("Event",{type:d.h.string,date:d.h.Date,payload:d.h.maybe(f)}),g=d.h.model("Log",{events:d.h.array(m)}).actions((function(e){return{logEvent:function(t,n){e.events.push(m.create({date:Date.now(),payload:n,type:t}))}}})),h=n(31),v=n(37),b=n(18),E=n.n(b),y=n(39),w=n(46),j=n(10),O=n(58),k=n(115),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return d.h.compose.apply(d.h,Object(O.a)([d.h.model({id:d.h.identifier})].concat(e))).named("Node")},C=function(e){return d.h.model("EdgeMap",{edgeMap:d.h.map(d.h.array(d.h.safeReference(d.h.late(e),{acceptsUndefined:!1})))}).actions((function(e){return{hasEdge:function(t,n){var a,o;return n?Boolean(null===(a=e.edgeMap.get(t))||void 0===a?void 0:a.includes(n)):Boolean(null===(o=e.edgeMap.get(t))||void 0===o?void 0:o.length)}}})).actions((function(e){return{addEdge:function(t,n){var a;e.edgeMap.has(t)||e.edgeMap.set(t,[]),null===(a=e.edgeMap.get(t))||void 0===a||a.push(n)},removeEdge:function(t,n){var a;if(!(null===(a=e.edgeMap.get(t))||void 0===a?void 0:a.remove(n)))throw Error("Node '".concat(e,"' has no '").concat(t,"' edge for '").concat(n,"'"))}}})).views((function(e){return{getEdgeTag:function(t){return e.edgeMap.get(t)}}}))},M=N(C((function(){return M}))),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{Node:M},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d.h.model("Graph",Object.fromEntries(Object.keys(e).map((function(t){var n=e[t];if(Object(d.e)(n)&&Object(d.d)(n.properties.id))return[t,d.h.map(e[t])];throw Error("Model '".concat(t,"' requires 'id' identifier"))})))).actions((function(n){return{createNode:function(){var a,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Node",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e[r])throw Error("No model named '".concat(r,"'"));var c=e[r].create(Object(j.a)({id:null!==(a=null===(o=t.getId)||void 0===o?void 0:o.call(t))&&void 0!==a?a:Object(k.a)()},i));return n[r].put(c),c}}}))},B=(x(),N(p)),S=N([g,C((function(){return d.h.union(d.h.late((function(){return S})),B)}))]).props({label:d.h.maybe(d.h.string)}).views((function(e){return{get childCount(){var t;return null===(t=e.edgeMap.get("child"))||void 0===t?void 0:t.length}}}));function T(e){return A.apply(this,arguments)}function A(){return(A=Object(y.a)(E.a.mark((function e(t){var n,a,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new w.a("default"),a=Object.keys(Object(d.b)(t).properties),o=Object.fromEntries(a.map((function(e){return[e,"id"]}))),n.version(1).stores(o),e.abrupt("return",Promise.all(a.map((function(e){return n.table(e).toArray().then((function(t){return[e,Object.fromEntries(t.map((function(e){return[e.id,e]})))]}))}))).then((function(e){Object(d.a)(t,Object.fromEntries(e)),Object(d.g)(t,(function(e){var a=e.path.split("/").slice(1),o=Object(v.a)(a,3),r=o[0],i=o[1],c=o[2];if("add"===e.op)n.table(r).put(Object(d.c)(t[r].get(i)));else{if("replace"!==e.op&&"remove"!==e.op)throw Error("Unknown patch op '".concat(e.op,"'"));c?n.table(r).update(i,Object(h.a)({},c,Object(d.c)(t[r].get(i)[c]))):n.table(r).delete(i)}}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return W.apply(this,arguments)}function W(){return(W=Object(y.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.Config.has("graph")){e.next=2;break}return e.abrupt("return");case 2:n=t.createNode("Node",{label:"Root"}),t.createNode("Config",{id:"graph",items:{rootNodeId:n.id,editMode:!1}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=x({Node:S,Config:B}).actions((function(e){return{afterCreate:function(){[T,I].reduce(function(){var t=Object(y.a)(E.a.mark((function t(n,a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:return t.abrupt("return",a(e));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Promise.resolve()).catch((function(e){throw Error("Adapter error: ".concat(e))}))},createChild:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Node",o=e.createNode(a,n);return t.addEdge("child",o),o.addEdge("parent",t),o},deleteNode:function(t){e.Node.delete(t.id)},toggleEditMode:function(){var t=e.Config.get("graph").get("editMode");e.Config.get("graph").set("editMode",!t)}}})).views((function(e){return{get rootNode(){var t=e.Config.get("graph");return e.Node.get(null===t||void 0===t?void 0:t.get("rootNodeId"))},get editMode(){var t=e.Config.get("graph");return null===t||void 0===t?void 0:t.get("editMode")}}})),P=o.a.createContext(null),R=function(e){var t=e.children,n=e.value;return o.a.createElement(P.Provider,{value:null!==n&&void 0!==n?n:F.create()},t)};function U(e){var t=o.a.useContext(P);if(t)return Object(u.a)((function(){return e(t)}));throw Error("Cannot use graph before setup")}var D=n(57),z=n(106),L=n(104),G=n(107),J={primary:{main:"#34c3ff"}},X={fontFamily:'-apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'},q=function(e){var t=e.children,n=Object(L.a)("(prefers-color-scheme: dark)"),a=o.a.useMemo((function(){return Object(D.a)({typography:X,palette:Object(j.a)(Object(j.a)({},J),{},{type:n?"dark":"light",background:{default:n?"#000000":"#ffffff"}}),props:{MuiButtonBase:{disableRipple:!0}},overrides:{MuiCssBaseline:{"@global":{html:{userSelect:"none",overscrollBehavior:"none"}}}}})}),[n]);return o.a.createElement(z.a,{theme:a},o.a.createElement(G.a,null),t)},H=n(38),$=n(17),K=n(109),Q=n(117),V=n(110),Y=n(108),Z=n(116),_=Object(Y.a)((function(e){return Object(Z.a)({root:{},item:{},itemText:{}})})),ee=function(e){var t=_();return U((function(n){var a=e.node;if("string"===typeof a&&(a=n.Node.get(e.node)),!Object(d.f)(a))return o.a.createElement(o.a.Fragment,null);var r=Object(d.b)(a),i=Object.keys(r.properties);return o.a.createElement("form",{onSubmit:function(){console.log("submit")}},o.a.createElement(K.a,{className:t.root},i.map((function(e){return o.a.createElement(Q.a,{dense:!0,button:!0,key:e,className:t.item},o.a.createElement(V.a,{primary:e,id:"list-label-".concat(e),className:t.itemText}))}))))}))},te=n(118),ne=n(111),ae=n(112),oe=n(40),re=n(53),ie=n.n(re),ce=n(54),le=n.n(ce),ue=Object(Y.a)((function(e){return Object(Z.a)({root:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,marginBottom:-e.spacing(1)},toolbar:{padding:e.spacing(0,2,0,2)},backButton:{color:e.palette.primary.main,"&[disabled]":{visibility:"hidden",pointerEvents:"none"}},moreButton:{"&.editMode":{color:e.palette.error.main}},title:{flexGrow:1,textAlign:"center",overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}})})),de=function(e){var t=e.node,n=e.showTitle,a=ue();return U((function(e){return o.a.createElement(te.a,{elevation:0,position:"sticky",className:a.root},o.a.createElement(ne.a,{variant:"dense",className:a.toolbar},o.a.createElement(ae.a,{disabled:e.rootNode.id===t.id||void 0,edge:"start",color:"primary","aria-label":"back",onClick:function(){return window.history.back()},className:a.backButton},o.a.createElement(ie.a,null)),n&&o.a.createElement(oe.a,{variant:"h6",className:a.title},t.label),o.a.createElement(ae.a,{edge:"end","aria-label":"more",onClick:function(){return e.toggleEditMode()},className:[a.moreButton,e.editMode?"editMode":""].join(" ")},o.a.createElement(le.a,{fontSize:"small"}))))}))};de.defaultProps={showTitle:!0};var se=de,pe=n(114),fe=n(55),me=n.n(fe),ge=Object(Y.a)((function(e){return Object(Z.a)({root:{display:"flex",flexDirection:"row",alignItems:"center",padding:e.spacing(1,2,1,2),background:e.palette.background.default},inputBase:Object(j.a)(Object(j.a)({},e.typography.body1),{},{"& input":{padding:0,height:"auto"}}),iconButton:{padding:0,color:e.palette.common.white,backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:e.palette.success.light}}})})),he=function(e){var t=e.node,n=e.className,a=ge(),r=o.a.useState(""),i=Object(v.a)(r,2),c=i[0],l=i[1],u=function(e){return l(e.target.value)};return U((function(e){return o.a.createElement("form",{className:[n,a.root].join(" "),onSubmit:function(n){n.preventDefault(),c&&(e.createChild(t,{label:c}),l(""))}},o.a.createElement(pe.a,{placeholder:"Add item",inputProps:{"aria-label":"item name"},onChange:u,value:c,className:a.inputBase,margin:"none",autoFocus:!0,fullWidth:!0}),c&&o.a.createElement(ae.a,{type:"submit","aria-label":"add item",className:a.iconButton},o.a.createElement(me.a,{fontSize:"small"})))}))},ve=n(113),be=n(56),Ee=n.n(be),ye=Object(Y.a)((function(e){return Object(Z.a)({root:{},listItem:{padding:e.spacing(2),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},itemText:Object(j.a)({display:"inline-block",margin:0,overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},e.typography.body1),secondaryActions:{color:e.palette.text.secondary},deleteButton:{color:e.palette.error.main}})})),we=function(e){var t;return null!==(t=e.label)&&void 0!==t?t:e.id},je=function(e){var t=e.node,n=(e.onClick,Object(H.a)(e,["node","onClick"])),a=ye();return U((function(e){return o.a.createElement(Q.a,{button:!0,to:"/".concat(t.id),component:$.a,onClick:function(t){if(e.editMode)return t.preventDefault(),void console.log("click");n.editable},className:a.listItem},o.a.createElement(V.a,{primary:we(t),className:a.itemText}),o.a.createElement(ve.a,{className:a.secondaryActions},t.childCount,e.editMode&&o.a.createElement(ae.a,{edge:"end","aria-label":"delete",onClick:function(){return e.deleteNode(t)},className:a.deleteButton},o.a.createElement(Ee.a,{fontSize:"small"}))))}))};je.defaultProps={editable:!0};var Oe=je,ke=Object(Y.a)((function(e){return Object(Z.a)({list:{},addItem:Object(j.a)({position:"sticky",bottom:0,marginTop:-e.spacing(1)},e.typography.body1)})})),Ne=function(e){var t=e.node,n=e.edgeTag,a=(e.className,ke());return U((function(e){var r;return o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{"aria-label":"edge list",className:a.list},null===(r=t.edgeMap.get(n))||void 0===r?void 0:r.map((function(e){return o.a.createElement(Oe,{node:e,key:"".concat(n,"-").concat(e.id),editable:!0})}))),o.a.createElement(he,{node:t,className:a.addItem}))}))},Ce=function(e){var t=e.node;return U((function(e){var n=e.Node.get(t);return n||(n=e.rootNode),n?o.a.createElement(o.a.Fragment,null,o.a.createElement(se,{node:n}),o.a.createElement(Ne,{node:n,edgeTag:"child"})):o.a.createElement(o.a.Fragment,null)}))},Me=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement($.a,{to:"/"},"Root"),o.a.createElement($.a,{to:"/settings"},"Settings"))},xe=function(e){var t=e.component,n=Object(H.a)(e,["component"]);return o.a.createElement(t,n)},Be=function(){return o.a.createElement($.b,null,o.a.createElement(xe,{path:"/",component:Ce}),o.a.createElement(xe,{path:"/:node",component:Ce}),o.a.createElement(xe,{path:"/:node/edit",component:ee}),o.a.createElement(xe,{path:"/settings",component:Me}))};i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(R,null,o.a.createElement(q,null,o.a.createElement(Be,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");c?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):l(t,e)}))}}()}},[[62,1,2]]]);
//# sourceMappingURL=main.83f3601b.chunk.js.map