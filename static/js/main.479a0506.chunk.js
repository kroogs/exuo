(this.webpackJsonpexuo=this.webpackJsonpexuo||[]).push([[0],{153:function(e,t,n){e.exports=n(264)},264:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(23),i=n.n(r),c=(n(158),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function l(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=n(32),s=n.n(u),d=n(49),m=n(132),p=n(66),f=n(39),g=n(4),h=n(131);function v(){return(v=Object(d.a)(s.a.mark((function e(t){var n,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new h.a("default"),a=Object.keys(Object(g.b)(t).properties),o=Object.fromEntries(a.map((function(e){return[e,"id"]}))),n.version(1).stores(o),e.abrupt("return",Promise.all(a.map((function(e){return n.table(e).toArray().then((function(t){return[e,Object.fromEntries(t.map((function(e){return[e.id,e]})))]}))}))).then((function(e){Object(g.a)(t,Object.fromEntries(e)),Object(g.g)(t,(function(e){var a=e.path.split("/").slice(1),o=Object(f.a)(a,3),r=o[0],i=o[1],c=o[2];if("add"===e.op)n.table(r).put(Object(g.c)(t[r].get(i)));else{if("replace"!==e.op&&"remove"!==e.op)throw Error("Unknown patch op '".concat(e.op,"'"));c?n.table(r).update(i,Object(p.a)({},c,Object(g.c)(t[r].get(i)[c]))):n.table(r).delete(i)}}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(e){return v.apply(this,arguments)},E=g.h.union(g.h.boolean,g.h.string,g.h.number,g.h.array(g.h.late((function(){return E}))),g.h.map(g.h.late((function(){return E})))),y=g.h.model("Config",{name:g.h.maybe(g.h.string),items:g.h.map(E)}).actions((function(e){return{set:function(t,n){e.items.set(t,n)}}})).views((function(e){return{get:function(t){return e.items.get(t)}}})),w=g.h.union(g.h.boolean,g.h.string,g.h.number,g.h.late((function(){return g.h.array(w)}))),N=g.h.model("Event",{type:g.h.string,date:g.h.Date,payload:g.h.maybe(w)}),j=g.h.model("Log",{events:g.h.array(N)}).actions((function(e){return{logEvent:function(t,n){e.events.push(N.create({date:Date.now(),payload:n,type:t}))}}})),O=n(20),k=n(148),C=n(298),x=function(e){return g.h.model("EdgeMap",{edgeMap:g.h.map(g.h.array(g.h.safeReference(g.h.late(e),{acceptsUndefined:!1})))}).actions((function(e){return{hasEdge:function(t,n){var a,o;return n?Boolean(null===(a=e.edgeMap.get(t))||void 0===a?void 0:a.includes(n)):Boolean(null===(o=e.edgeMap.get(t))||void 0===o?void 0:o.length)}}})).actions((function(e){return{addEdge:function(t,n){var a;e.edgeMap.has(t)||e.edgeMap.set(t,[]),null===(a=e.edgeMap.get(t))||void 0===a||a.push(n)},removeEdge:function(t,n){var a;if(!(null===(a=e.edgeMap.get(t))||void 0===a?void 0:a.remove(n)))throw Error("Node '".concat(e,"' has no '").concat(t,"' edge for '").concat(n,"'"))}}})).views((function(e){return{getEdgeTag:function(t){return e.edgeMap.get(t)}}}))},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return g.h.compose.apply(g.h,Object(k.a)([g.h.model({id:g.h.identifier})].concat(e))).named("Node")},S=M(x((function(){return S}))),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{Node:S},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.h.model("Graph",Object.fromEntries(Object.keys(e).map((function(t){var n=e[t];if(Object(g.e)(n)&&Object(g.d)(n.properties.id))return[t,g.h.map(e[t])];throw Error("Model '".concat(t,"' requires 'id' identifier"))})))).actions((function(n){return{createNode:function(){var a,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Node",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e[r])throw Error("No model named '".concat(r,"'"));var c=e[r].create(Object(O.a)({id:null!==(a=null===(o=t.getId)||void 0===o?void 0:o.call(t))&&void 0!==a?a:Object(C.a)()},i));return n[r].put(c),c}}}))},T=(B(),M(y)),I=M([j,x((function(){return g.h.union(g.h.late((function(){return I})),T)}))]).props({label:g.h.maybe(g.h.string)}).actions((function(e){return{afterCreate:function(){e.logEvent("create")}}})).views((function(e){return{get childCount(){var t,n;return null!==(t=null===(n=e.edgeMap.get("child"))||void 0===n?void 0:n.length)&&void 0!==t?t:0},get createDate(){var t;return null===(t=e.events[0])||void 0===t?void 0:t.date}}}));function A(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.Config.has("system")){e.next=2;break}return e.abrupt("return");case 2:n=t.createNode("Node",{label:"Exuo"}),t.createNode("Config",{id:"system",items:{rootNodeId:n.id,editMode:!1,selectedNodes:[]}}),t.createNode("Config",{id:"user",items:{global:{dateFormat:"",timeFormat:"",dividers:!1},lists:{number:!1,checkbox:!1,dividers:!1,showChildCount:!0,showEdgeChips:!1}}});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=B({Node:I,Config:T}).actions((function(e){return{createChild:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Node",o=e.createNode(a,n);return t.addEdge("child",o),o.addEdge("parent",t),o},deleteNode:function(t){e.Node.delete(t.id)},toggleSelectNode:function(t){var n=e.Config.get("system").get("selectedNodes");(null===n||void 0===n?void 0:n.includes(t.id))?null===n||void 0===n||n.remove(t.id):null===n||void 0===n||n.push(t.id)},clearSelected:function(){e.Config.get("system").set("selectedNodes",[])},toggleEditMode:function(){var t=e.Config.get("system").get("editMode");e.Config.get("system").set("editMode",!t),t&&e.clearSelected()}}})).views((function(e){return{get rootNode(){var t=e.Config.get("system");return e.Node.get(null===t||void 0===t?void 0:t.get("rootNodeId"))},get editMode(){var t=e.Config.get("system");return null===t||void 0===t?void 0:t.get("editMode")},get selectedNodes(){var t;return null===(t=e.Config.get("system"))||void 0===t?void 0:t.get("selectedNodes")}}})).actions((function(e){return{afterCreate:function(){[b,A].reduce(function(){var t=Object(d.a)(s.a.mark((function t(n,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:return t.abrupt("return",a(e));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Promise.resolve()).catch((function(e){throw Error("Adapter error: ".concat(e))}))}}})),W=o.a.createContext(null),P=function(e){var t=e.children,n=e.value;return o.a.createElement(W.Provider,{value:null!==n&&void 0!==n?n:R.create()},t)};function D(e){var t=o.a.useContext(W);if(t)return Object(m.a)((function(){return e(t)}));throw Error("Cannot use graph before setup")}var U=n(147),L=n(287),z=n(285),X=n(288),G=function(e){var t=e.children,n=Object(z.a)("(prefers-color-scheme: dark)"),a=o.a.useMemo((function(){return Object(U.a)({typography:{fontFamily:["-apple-system","system-ui","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(", ")},palette:{primary:{main:"#f94d94"},type:n?"dark":"light",background:{default:n?"#000000":"#ffffff"}},shape:{borderRadius:3},props:{MuiButtonBase:{disableRipple:!0}},overrides:{MuiCssBaseline:{"@global":{html:{userSelect:"none",overscrollBehavior:"none","-webkit-touch-callout":"none",maxWidth:"600px",margin:"auto","&, & body":{height:"100%"}}}}}})}),[n]);return o.a.createElement(L.a,{theme:a},o.a.createElement(X.a,null),t)},J=n(74),q=n(28),H=n(290),$=n(300),K=n(291),Q=n(289),V=n(299),Y=Object(Q.a)((function(e){return Object(V.a)({root:{},item:{},itemText:{}})})),Z=function(e){var t=Y();return D((function(n){var a=e.node;if("string"===typeof a&&(a=n.Node.get(e.node)),!Object(g.f)(a))return o.a.createElement(o.a.Fragment,null);var r=Object(g.b)(a),i=Object.keys(r.properties);return o.a.createElement("form",{onSubmit:function(){console.log("submit")}},o.a.createElement(H.a,{className:t.root},i.map((function(e){return o.a.createElement($.a,{dense:!0,button:!0,key:e,className:t.item},o.a.createElement(K.a,{primary:e,id:"list-label-".concat(e),className:t.itemText}))}))))}))},_=n(301),ee=n(292),te=n(293),ne=n(76),ae=n(138),oe=n.n(ae),re=n(139),ie=n.n(re),ce=Object(Q.a)((function(e){return Object(V.a)({root:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,marginBottom:-e.spacing(1)},toolbar:{padding:e.spacing(0,2,0,2)},backButton:{color:e.palette.primary.main,"&[disabled]":{visibility:"hidden",pointerEvents:"none"}},settingsButton:{visibility:"hidden",pointerEvents:"none"},title:{flexGrow:1,textAlign:"center",overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}})})),le=function(e){var t=e.node,n=e.showTitle,a=ce();return D((function(e){return o.a.createElement(_.a,{elevation:0,position:"sticky",className:a.root},o.a.createElement(ee.a,{variant:"dense",className:a.toolbar},o.a.createElement(te.a,{disabled:e.rootNode.id===t.id||void 0,edge:"start",color:"primary","aria-label":"back",onClick:function(){return window.history.back()},className:a.backButton},o.a.createElement(oe.a,null)),o.a.createElement(ne.a,{variant:"h6",className:a.title},n&&t.label),o.a.createElement(te.a,{edge:"end","aria-label":"settings",onClick:function(){return e.toggleEditMode()},className:[a.settingsButton,e.editMode?"editMode":""].join(" ")},o.a.createElement(ie.a,{fontSize:"small"}))))}))};le.defaultProps={showTitle:!0};var ue=le,se=n(297),de=n(144),me=n.n(de),pe=n(73),fe=(n(130),n(294)),ge=n(143),he=n.n(ge),ve=n(140),be=n.n(ve),Ee=n(142),ye=n.n(Ee),we=n(141),Ne=n.n(we),je=Object(Q.a)((function(e){return Object(V.a)({root:{textAlign:"center"},button:{margin:e.spacing(0,1,0,1)},deleteButton:{"&:hover, &:focus":{backgroundColor:"inherit",color:e.palette.error.main}}})})),Oe=function(e){e.node;var t=je();return D((function(e){return o.a.createElement("div",{className:t.root},o.a.createElement(ne.a,{variant:"body2"},e.selectedNodes.length," Selected"),o.a.createElement(fe.a,{startIcon:o.a.createElement(be.a,null),disabled:!0,className:t.button},"Modify"),o.a.createElement(fe.a,{startIcon:o.a.createElement(Ne.a,null),disabled:!0,className:t.button},"Copy"),o.a.createElement(fe.a,{startIcon:o.a.createElement(ye.a,null),disabled:!0,className:t.button},"Move"),o.a.createElement(fe.a,{startIcon:o.a.createElement(he.a,null),className:[t.button,t.deleteButton].join(" ")},"Delete"))}))},ke=Object(Q.a)((function(e){return Object(V.a)({root:Object(O.a)(Object(O.a)({position:"sticky",bottom:0,marginTop:-e.spacing(1)},e.typography.body1),{},{padding:0,background:e.palette.background.default}),inputBase:Object(O.a)(Object(O.a)({},e.typography.body1),{},{"& input":{padding:e.spacing(1,2,1,2),height:"auto"}}),iconButton:{padding:0,marginLeft:-e.spacing(4),color:e.palette.common.white,backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:e.palette.success.light}}})})),Ce=function(e){var t=e.node,n=ke(),a=o.a.useState(""),r=Object(f.a)(a,2),i=r[0],c=r[1],l=function(e){return c(e.target.value)},u=o.a.useState((function(){return pe.EditorState.createEmpty()})),s=Object(f.a)(u,2);s[0],s[1];return D((function(e){return o.a.createElement("div",{className:n.root},e.editMode?o.a.createElement(Oe,{node:t}):o.a.createElement("form",{onSubmit:function(n){n.preventDefault(),i&&(e.createChild(t,{label:i}),c(""))}},o.a.createElement(se.a,{placeholder:"Add item",inputProps:{"aria-label":"item name"},onChange:l,value:i,className:n.inputBase,margin:"none",autoFocus:!0,fullWidth:!0}),i&&o.a.createElement(te.a,{type:"submit","aria-label":"add item",className:n.iconButton},o.a.createElement(me.a,{fontSize:"small"}))))}))},xe=n(296),Me=n(295),Se=n(302),Be=n(145),Te=n.n(Be),Ie=n(146),Ae=n.n(Ie),Fe=Object(Q.a)((function(e){return Object(V.a)({root:{},listItem:{},itemText:Object(O.a)({display:"inline-block",margin:0,overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},e.typography.body1),listItemIcon:{minWidth:"auto"},checkbox:{padding:e.spacing(0,1,0,1)},editItemText:Object(O.a)(Object(O.a)({display:"inline-block",margin:0,overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},e.typography.body1),{},{"& input":{height:"auto",padding:0}}),chip:{pointerEvents:"auto",color:e.palette.text.hint,backgroundColor:"transparent","&:hover":{color:e.palette.primary.main,cursor:"auto"},"& svg":{pointerEvents:"auto",color:"inherit"},"&:last-child .MuiChip-label":{paddingRight:0}},secondaryActions:{right:0,color:e.palette.text.secondary},childButton:{color:e.palette.text.secondary,"&:hover, &:focus":{color:e.palette.primary.main,background:"inherit"}}})})),Re=function(e){var t=e.node,n=(Object(J.a)(e,["node"]),Fe()),a=Object(q.c)(),r=o.a.useState((function(){return pe.EditorState.createEmpty()})),i=Object(f.a)(r,2),c=(i[0],i[1],o.a.useRef(!1)),l=o.a.useRef();return D((function(e){var r,i=null===(r=e.Config.get("user"))||void 0===r?void 0:r.get("lists"),u=null===i||void 0===i?void 0:i.get("showChildCount"),s=null===i||void 0===i?void 0:i.get("showEdgeChips"),d=function(t){t.preventDefault(),c.current=!0,l.current=setTimeout((function(){c.current=!1,l.current&&clearTimeout(l.current),e.toggleEditMode()}),390)},m=function(t){return function(n){n.preventDefault(),c.current&&(e.editMode?e.toggleSelectNode(t):a("/".concat(t.id,"/")),c.current=!1,l.current&&clearTimeout(l.current))}};return o.a.createElement($.a,{button:!0,component:"li",onMouseDown:d,onTouchStart:d,onMouseUp:m(t),onTouchEnd:m(t),className:n.listItem},e.editMode?o.a.createElement(o.a.Fragment,null,o.a.createElement(xe.a,{checked:e.selectedNodes.includes(t.id),tabIndex:-1,color:"primary",edge:"start",className:n.checkbox}),o.a.createElement(K.a,{primary:t.label,primaryTypographyProps:{display:"inline"},className:n.itemText})):o.a.createElement(K.a,{primary:t.label,primaryTypographyProps:{display:"inline"},className:n.itemText}),o.a.createElement(Me.a,{className:n.secondaryActions},s&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Se.a,{label:t.childCount,icon:o.a.createElement(Te.a,null),size:"small",to:"/".concat(t.id,"/"),component:q.a,className:n.chip})),u&&!s&&t.childCount>0&&o.a.createElement(fe.a,{endIcon:o.a.createElement(Ae.a,null),to:"/".concat(t.id,"/"),component:q.a,className:n.childButton},t.childCount)))}))},We=Object(Q.a)((function(e){return Object(V.a)({list:{},addItem:{}})})),Pe=function(e){var t=e.node,n=e.edgeTag,a=(e.className,We());return D((function(e){var r;return o.a.createElement(o.a.Fragment,null,o.a.createElement(H.a,{"aria-label":"edge list",className:a.list},null===(r=t.edgeMap.get(n))||void 0===r?void 0:r.map((function(e){return o.a.createElement(Re,{node:e,key:"".concat(n,"-").concat(e.id)})}))),o.a.createElement(Ce,{node:t}))}))},De=function(e){var t=e.node;return D((function(e){var n=e.Node.get(t);return n||(n=e.rootNode),n?o.a.createElement(o.a.Fragment,null,o.a.createElement(ue,{node:n}),o.a.createElement(Pe,{node:n,edgeTag:"child"})):o.a.createElement(o.a.Fragment,null)}))},Ue=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{to:"/"},"Root"),o.a.createElement(q.a,{to:"/settings"},"Settings"))},Le=function(e){var t=e.component,n=Object(J.a)(e,["component"]);return o.a.createElement(t,n)},ze=function(){return o.a.createElement(q.b,null,o.a.createElement(Le,{path:"/",component:De}),o.a.createElement(Le,{path:"/:node",component:De}),o.a.createElement(Le,{path:"/:node/edit",component:Z}),o.a.createElement(Le,{path:"/settings",component:Ue}))};i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(P,null,o.a.createElement(G,null,o.a.createElement(ze,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/exuo",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/exuo","/service-worker.js");c?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):l(t,e)}))}}()}},[[153,1,2]]]);
//# sourceMappingURL=main.479a0506.chunk.js.map